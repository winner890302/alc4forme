# å®˜æ–¹æ‰‹å†Œ - https://manual.nssurge.com/
# ç†è§£åŽŸç† - https://manual.nssurge.com/book/understanding-surge/cn/
# å¸®åŠ©ä¸­å¿ƒ - https://nssurge.zendesk.com/
# æŠ€æœ¯ç¤¾åŒº - https://community.nssurge.com

[General]
# é€šç”¨è®¾ç½®

# > å¢žå¼ºç‰ˆ Wi-Fi åŠ©ç†
# (åœ¨ Wi-Fi ç½‘ç»œä¸ä½³æ—¶å°è¯•ä½¿ç”¨æ•°æ®ç½‘ç»œå»ºç«‹è¿žæŽ¥ï¼Œè¯·ä»…å½“ä½¿ç”¨ä¸é™é‡çš„æ•°æ®æµé‡æ—¶å¼€å¯)
wifi-assist = false

# > Internet æµ‹è¯• URL
internet-test-url = http://wifi.vivo.com.cn/generate_204
# > ä»£ç†æµ‹é€Ÿ URL
proxy-test-url = http://cp.cloudflare.com/generate_204
# > æµ‹è¯•è¶…æ—¶ï¼ˆç§’ï¼‰
test-timeout = 5

# > è‡ªå®šä¹‰ GeoIP æ•°æ®åº“
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb

# > IPv6 æ”¯æŒï¼ˆé»˜è®¤å…³é—­ï¼‰
ipv6 = false

# > å…è®¸ Wi-Fi è®¿é—® (ä»… iOSï¼Œè‹¥å…è®¸è¿œç¨‹è®¿é—®å°†ã€Œfalseã€æ”¹ä¸ºã€Œtrueã€)
allow-wifi-access = false
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
# > å…è®¸ Wi-Fi è®¿é—® (ä»… macOSï¼Œè‹¥å…è®¸è¿œç¨‹è®¿é—®å°†ã€Œ127.0.0.1ã€æ”¹ä¸ºã€Œ0.0.0.0ã€)
http-listen = 127.0.0.1:6152
socks5-listen = 127.0.0.1:6153

# > å…¼å®¹æ¨¡å¼ (ä»… iOS)
# compatibility-mode = 0
# > è·³è¿‡ä»£ç†
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, localhost, *.local, passenger.t3go.cn
# > æŽ’é™¤ç®€å•ä¸»æœºå
exclude-simple-hostnames = true

# > Network framwork
network-framework = false

# > DNS æœåŠ¡å™¨ (å¦‚æ— å¿…è¦ä¸å»ºè®®ä½¿ç”¨ DNS over HTTPS)
dns-server = 119.29.29.29,system
# > ä»Ž /etc/hosts è¯»å– DNS è®°å½•
read-etc-hosts = true

# é«˜çº§è®¾ç½®

# > æ—¥å¿—çº§åˆ«
loglevel = notify

# > å½“é‡åˆ° REJECT ç­–ç•¥æ—¶è¿”å›žé”™è¯¯é¡µ
show-error-page-for-reject = true

# > Always Real IP Hosts
always-real-ip = *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com

# > VIF Excluded Routes
tun-excluded-routes = 239.255.255.250/32

# å¦‚æžœæ²¡æœ‰ä»£ç†æœåŠ¡å™¨æ”¯æŒ UDP è½¬å‘ï¼Œå¯ä¿®æ”¹ä¸ºã€Œ direct ã€æˆ–æ³¨é‡Šä¸‹æ¡ï¼Œä½†éœ€æ³¨æ„åŒä¸€ç›®æ ‡ä¸»æœºå TCP è¯·æ±‚ä¸Ž UDP è¯·æ±‚çš„æºåœ°å€ä¸åŒæ‰€é€ æˆçš„éšç§åŠå®‰å…¨é£Žé™©ã€‚
udp-policy-not-supported-behaviour = reject

[Replica]
# 0 ä¸ºå…³é—­ï¼Œ1 ä¸ºå¼€å¯
# > éšè— Apple è¯·æ±‚
hide-apple-request = 0
# > éšè—å´©æºƒè¿½è¸ªå™¨è¯·æ±‚
hide-crash-reporter-request = 1
# > éšè— UDP ä¼šè¯
hide-udp = 0
# > å…³é”®è¯è¿‡æ»¤å™¨
# noneï¼ˆå…³é—­å…³é”®è¯è¿‡æ»¤å™¨ï¼‰ / whitelistï¼ˆblacklistï¼ˆä»…è®°å½•åŒ…å«å…³é”®å­—çš„è¯·æ±‚ï¼‰ï¼‰ / blacklistï¼ˆä»…è®°å½•ä¸åŒ…å«å…³é”®å­—çš„è¯·æ±‚ï¼‰ / patternï¼ˆåŒ¹é…é€šé…ç¬¦çš„è¯·æ±‚ï¼‰
# keyword-filter-type = none
# > å…³é”®è¯
# keyword-filter = (null)

[Proxy]

[Proxy Group]
# èŠ‚ç‚¹é€‰é¡¹
âœˆProxy = select, DIRECT
# å›½é™…æµåª’ä½“æœåŠ¡
ðŸŽ¥Streaming = select, âœˆProxy
# ä¸­å›½æµåª’ä½“æœåŠ¡ï¼ˆé¢å‘æµ·å¤–ç‰ˆæœ¬ï¼‰
ðŸŽ¥StreamingSE = select, DIRECT
# é˜²å¾¡
ðŸ›¡Guard = select, REJECT, DIRECT
# AppleæœåŠ¡
ðŸŽApple = select, DIRECT, âœˆProxy
# ç™½åå•æ¨¡å¼ PROXYï¼Œé»‘åå•æ¨¡å¼ DIRECT
ðŸŸFinal = select, âœˆProxy, DIRECT

[Rule]
AND,((PROTOCOL,UDP),(DEST-PORT,443)),REJECT-NO-DROP

# Client
PROCESS-NAME,UUBooster,DIRECT
# > Download
PROCESS-NAME,aria2c,DIRECT
PROCESS-NAME,fdm,DIRECT
PROCESS-NAME,Folx,DIRECT
PROCESS-NAME,NetTransport,DIRECT
PROCESS-NAME,Thunder,DIRECT
PROCESS-NAME,Transmission,DIRECT
PROCESS-NAME,uTorrent,DIRECT
PROCESS-NAME,WebTorrent,DIRECT
PROCESS-NAME,WebTorrent Helper,DIRECT

# å¤§é™†IP
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaIPs/ChinaIPs.list,DIRECT

# Advertising å¹¿å‘Š
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising.list,ðŸ›¡Guard
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising_Domain.list,ðŸ›¡Guard

# Streaming å›½é™…æµåª’ä½“æœåŠ¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GlobalMedia/GlobalMedia.list,ðŸŽ¥Streaming

# StreamingSE ä¸­å›½æµåª’ä½“æœåŠ¡ï¼ˆé¢å‘æµ·å¤–ç‰ˆæœ¬ï¼‰
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMedia/ChinaMedia.list,ðŸŽ¥StreamingSE

# Global å…¨çƒåŠ é€Ÿ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy.list,âœˆProxy
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy_Domain.list,âœˆProxy

# Apple æœåŠ¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple.list,ðŸŽApple

# China ä¸­å›½ç›´è¿ž
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/China/China.list,DIRECT

# Local Area Network å±€åŸŸç½‘
RULE-SET,LAN,DIRECT

# GeoIP China
GEOIP,CN,DIRECT

FINAL,ðŸŸFinal,dns-failed

[Host]
# > Firebase Cloud Messaging
mtalk.google.com = 108.177.125.188

# > Google Dl
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
update.googleapis.com = server:119.29.29.29

# > PlayStation
*.dl.playstation.net = server:119.29.29.29

# > Router Admin Panel
amplifi.lan = server:syslib // Ubiquiti Amplifi Router
router.synology.com = server:syslib // Synology Router
sila.razer.com = server:syslib // Razer Sila Router
router.asus.com = server:syslib // Asus Router
routerlogin.net = server:syslib // Netgear Router
orbilogin.com = server:syslib // Netgear Obri Router
www.LinksysSmartWiFi.com = server:syslib // Linksys Router
LinksysSmartWiFi.com = server:syslib // Linksys Router
myrouter.local = server:syslib // Linksys Router
www.miwifi.com = server:syslib // Xiaomi Mi WiFi Router
miwifi.com = server:syslib // Xiaomi Mi WiFi Router
mediarouter.home = server:syslib // Huawei Router
tplogin.cn = server:syslib // TP-Link Router
tplinklogin.net = server:syslib // TP-Link Router
melogin.cn = server:syslib // MERCURY Router
falogin.cn = server:syslib // FAST Router

# è§£é”äº†ã€Œæ¨¡å—ã€åŠŸèƒ½çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨ General.sgmodule åŽå¯ç§»é™¤ [URL Rewrite] åŠ [MITM] çš„ã€Œhostname = www.google.cn,api.abema.ioã€éƒ¨åˆ†
# å»ºè®®ä½¿ç”¨ General.sgmoduleï¼Œå…¶ä»– .sgmodule æŒ‰éœ€åŠ å…¥
# æœªè§£é”ã€Œæ¨¡å—ã€åŠŸèƒ½çš„ç”¨æˆ·ä¸è¦åˆ é™¤ä»¥ä¸‹å†…å®¹ï¼Œå‚ç…§è¯´æ˜Ž(https://github.com/DivineEngine/Profiles/tree/master/Surge)ä½¿ç”¨å¿«æ·æŒ‡ä»¤æ›´æ–°ç›¸å…³å†…å®¹ã€‚

[Header Rewrite]

[URL Rewrite]
# Redirect Google Search Service
^https?:\/\/(www.)?(g|google)\.cn https://www.google.com 302

# Redirect Google Maps Service
^https?:\/\/(ditu|maps).google\.cn https://maps.google.com 302

# Redirect HTTP to HTTPS
^https?:\/\/(www.)?taobao\.com\/ https://taobao.com/ 302
^https?:\/\/(www.)?jd\.com\/ https://www.jd.com/ 302
^https?:\/\/(www.)?mi\.com\/ https://www.mi.com/ 302
^https?:\/\/you\.163\.com\/ https://you.163.com/ 302
^https?:\/\/(www.)?suning\.com\/ https://suning.com/ 302
^https?:\/\/(www.)?yhd\.com\/ https://yhd.com/ 302

# Redirect False to True
# > Firefox - www.firefox.com.cn
^https?:\/\/(www.)?firefox\.com\.cn\/(download\/)?$ https://www.mozilla.org/zh-CN/firefox/new/ 302
# > IGN China to IGN Global
^https?:\/\/(www.)?ign\.xn--fiqs8s\/ http://cn.ign.com/ccpref/us 302
# > Fake Website Made By C&J Marketing
^https?:\/\/(www.)?abbyychina\.com\/ https://www.abbyy.cn/ 302
^https?:\/\/(www.)?anydeskchina.cn/ https://anydesk.com/zhs 302
^https?:\/\/(www.)?bartender\.cc\/ https://www.macbartender.com/ 302
^https?:\/\/(www.)?(betterzipcn|betterzip)\.(com|net)\/ https://macitbetter.com/ 302
^https?:\/\/(www.)?beyondcompare\.cc\/ https://www.scootersoftware.com/ 302
^https?:\/\/(www.)?bingdianhuanyuan\.cn\/ https://www.faronics.com/zh-hans/products/deep-freeze 302
^https?:\/\/(www.)?chemdraw\.com\.cn\/ https://www.perkinelmer.com.cn/ 302
^https?:\/\/(www.)?codesoftchina\.com\/ https://www.teklynx.com/ 302
^https?:\/\/(www.)?coreldrawchina\.com\/ https://www.coreldraw.com/cn/ 302
^https?:\/\/(www.)?crossoverchina\.com\/ https://www.codeweavers.com/ 302
^https?:\/\/(www.)?dongmansoft\.com\/ https://www.udongman.cn/ 302
^https?:\/\/(www.)?earmasterchina\.cn\/ https://www.earmaster.com/ 302
^https?:\/\/(www.)?easyrecoverychina\.com\/ https://www.ontrack.com/ 302
^https?:\/\/(www.)?ediuschina\.com\/ https://www.grassvalley.com/ 302
^https?:\/\/(www.)?flstudiochina\.com\/ https://www.image-line.com/ 302
^https?:\/\/(www.)?formysql\.com\/ https://www.navicat.com.cn/ 302
^https?:\/\/(www.)?guitarpro\.cc\/ https://www.guitar-pro.com/ 302
^https?:\/\/(www.)?huishenghuiying\.com\.cn\/ https://www.coreldraw.com/cn/ 302
^https?:\/\/hypersnap\.mairuan\.com\/ https://www.hyperionics.com/ 302
^https?:\/\/(www.)?iconworkshop\.cn\/ https://www.axialis.com/ 302
^https?:\/\/(www.)?idmchina\.net\/ https://www.internetdownloadmanager.com/ 302
^https?:\/\/(www.)?imindmap\.cc\/ https://www.ayoa.com/previously-imindmap/ 302
^https?:\/\/(www.)?jihehuaban\.com\.cn\/ https://www.chartwellyorke.com/sketchpad/x24795.html 302
^https?:\/\/hypersnap\.mairuan\.com\/ https://www.keyshot.com/ 302
^https?:\/\/(www.)?kingdeecn\.cn\/ http://www.kingdee.com/ 302
^https?:\/\/(www.)?logoshejishi\.com https://www.sothink.com/product/logo-design-software/ 302
^https?:\/\/logoshejishi\.mairuan\.com\/ https://www.sothink.com/product/logo-design-software/ 302
^https?:\/\/(www.)?luping\.net\.cn\/ https://www.techsmith.com/ 302
^https?:\/\/(www.)?mathtype\.cn\/ https://www.dessci.com/ 302
^https?:\/\/(www.)?mindmanager\.(cc|cn)\/ https://www.mindjet.com/cn/ 302
^https?:\/\/(www.)?mindmapper\.cc\/ https://www.mindmapper.com/ 302
^https?:\/\/(www.)?(mycleanmymac|xitongqingli)\.com\/ https://macpaw.com/ 302
^https?:\/\/(www.)?nicelabel\.cc\/ https://www.nicelabel.com/zh/ 302
^https?:\/\/(www.)?ntfsformac\.cc\/ https://www.tuxera.com/products/tuxera-ntfs-for-mac-cn/ 302
^https?:\/\/(www.)?ntfsformac\.cn\/ https://china.paragon-software.com/home-mac/ntfs-for-mac/ 302
^https?:\/\/(www.)?officesoftcn\.com\/ https://www.microsoft.com/zh-cn/microsoft-365 302
^https?:\/\/(www.)?overturechina\.com\/ https://sonicscores.com/ 302
^https?:\/\/(www.)?passwordrecovery\.cn\/ https://cn.elcomsoft.com/aopr.html 302
^https?:\/\/(www.)?pdfexpert\.cc\/ https://pdfexpert.com/zh 302
^https?:\/\/(www.)?photozoomchina\.com\/ https://www.benvista.com/ 302
^https?:\/\/(www.)?shankejingling\.com\/ https://www.sothink.com/product/flashdecompiler/ 302
^https?:\/\/cn\.ultraiso\.net\/ https://cn.ezbsystems.com/ultraiso/ 302
^https?:\/\/(www.)?vegaschina\.cn\/ https://www.vegascreativesoftware.com/ 302
^https?:\/\/(www.)?xshellcn\.com\/ https://www.netsarang.com/zh/xshell/ 302
^https?:\/\/(www.)?yuanchengxiezuo\.com\/ https://www.teamviewer.com/ 302
^https?:\/\/(www.)?zbrushcn\.com\/ https://pixologic.com/ 302

# AbeamTV - api.abema.io
^https?:\/\/api\.abema\.io\/v\d\/ip\/check - reject

# AICoin
^http:\/\/(www.)?aicoin\.cn\/$ https://www.aicoin.com/ 302

# Block Ads Start

# Block Ads End

[Script]

[SSID Setting]

[MITM]
skip-server-cert-verify = true
hostname = www.google.cn,www.firefox.com.cn,api.abema.io,tiku.zhan.com,smkmp.96225.com,rtbapi.douyucdn.cn,api.xueqiu.com,api.mgzf.com,app.poizon.com,bbs.tianya.cn,d*.sinaimg.cn,mobi.360doc.com,hk.app.joox.com,img-ys011.didistatic.com,cdn.moji.com,res-release.wuta-cam.com,media.qyer.com,status.boohee.com,ccsp-egmas.sf-express.com,api.izuiyou.com,www.shihuo.cn,cdnfile1.msstatic.com,ios.wps.cn,server-*.imrworldwide.com,i.ys7.com,yxyapi*.drcuiyutao.com,api.m.mi.com,weibointl.api.weibo.cn,mm.app.joox.com,s*.zdmimg.com,pic1cdn.cmbchina.com,iadmat.a-z*.1267.net,api.huomao.com,www.icourse163.org,manga.bilibili.com,e.dangdang.com,app3.qdaily.com,dsp.toutiao.com,bdsp-x.jd.com,iapi.bishijie.com,images.client.vip.xunlei.com,iface.iqiyi.com,pocketuni.net,res.xiaojukeji.com,s1.api.tv.itc.cn,ss0.bdstatic.com,nnapp.cloudbae.cn,*.cloudfront.net,*.snssdk.com,b.zhuishushenqi.com,supportda.ofo.com,sax*.sina.cn,*.com1.z0.glb.clouddn.com,pic.edaijia.cn,static1.keepcdn.com,cap.caocaokeji.cn,api.rr.tv,r.inews.qq.com,gw.alicdn.com,msspjh.emarbox.com,cdn.api.fotoable.com,slapi.oray.net,issuecdn.baidupcs.com,www.didapinche.com,api.jr.mi.com,smusic.app.wechat.com,vv.video.qq.com,flowplus.meituan.net,p*.meituan.net,api.videozhishi.com,api.intsig.net,*.zhangle.com,m.ibuscloud.com,mapi.dangdang.com,api*.futunn.com,static.vuevideo.net,api.tv.sohu.com,overseas.weico.cc,api.vistopia.com.cn,www.iyingdi.cn,act.vip.iqiyi.com,tqt.weibo.cn,api-mifit.huami.com,client.mail.163.com,api.daydaycook.com.cn,snailsleep.net,www.cmbc.com.cn,app.yinxiang.com,dl.app.gtja.com,clientaccess.10086.cn,vali.cp31.ott.cibntv.net,s3plus.meituan.net,api.meipian.me,sina.com,update.pan.baidu.com,app.variflight.com,app.zhuanzhuan.com,www.myhug.cn,mp.weixin.qq.com,appconf.mail.163.com,richmanapi.jxedt.com,sdkapp.uve.weibo.com,games.mobileapi.hupu.com,api.21jingji.com,api.catch.gift,p.du.163.com,aes.acfun.cn,news.ssp.qq.com,pic.k.sohu.com,pss.txffp.com,dxy.com,dili.bdatu.com,g.cdn.pengpengla.com,www.dandanzan.com,www.hxeduonline.com,*.logic.cpm.cm.kankan.com,heic.alicdn.com,appv6.55haitao.com,*.atm.youku.com,img.meituan.net,api.zhuishushenqi.com,edit.sinaapp.com,image.suning.cn,www.cntv.com,capis*.didapinche.com,wbapp.uve.weibo.com,mapi.mafengwo.cn,portal-xunyou.qingcdn.com,asp.cntv.myalicdn.com,creditcardapp.bankcomm.com,v.cctv.com,*.gdt.qq.com,ad*.sina.com,gw-passenger.01zhuanche.com,business-cdn.shouji.sogou.com,m.tuniu.com,notice.send-anywhere.com,api.k.sohu.com,pic1.chelaile.net.cn,*.iydsj.com,gg*.cmvideo.cn,api.gotokeep.com,api.chelaile.net.cn,mobile-pic.cache.iciba.com,img.jiemian.com,open.qyer.com,channel.beitaichufang.com,ios.lantouzi.com,foodie-api.yiruikecorp.com,dict-mobile.iciba.com,business.msstatic.com,cntv.hls.cdn.myqcloud.com,ms.jr.jd.com,cmsapi.wifi8.com,mob.mddcloud.com.cn,v.icbc.com.cn,agent-count.pconline.com.cn,imeclient.openspeech.cn,api.haohaozhu.cn,daoyu.sdo.com,wap.js.10086.cn,ssl.kohsocialapp.qq.com,app.wy.guahao.com,ma.ofo.com,api-release.wuta-cam.com,cms.daydaycook.com.cn,consumer.fcbox.com,goblin.hupu.com,qt.qq.com,c.m.163.com,oimage*.ydstatic.com,ad*.sina.com.cn,support.you.163.com,*.l.qq.com,impserviceyoudao.com,mangaapi.manhuaren.com,ih2.ireader.com,*.ximalaya.com,m*.amap.com,api.qbb6.com,a.apicloud.com,b-api.ins.miaopai.com,gateway.shouqiev.com,activity2.api.ofo.com,list-app-m.i4.cn,*.pstatp.com,api.qiuduoduo.cn,*.58cdn.com.cn,dsp-impr2.youdao.com,render.alipay.com,restapi.iyunmai.com,api.waitwaitpay.com,app.58.com,p*.music.126.net,a.qiumibao.com,adpai.thepaper.cn,www.zybang.com,*.beacon.qq.com,cdn-1rtb.caiyunapp.com,api.gaoqingdianshi.com,p.kuaidi100.com,dsa-mfp.fengshows.cn,sa*.tuisong.baidu.com,sax*.sina.com.cn,thor.weidian.com,service.iciba.com,api.wallstreetcn.com,guide-acs.m.taobao.com,wap.ngchina.cn,easyreadfs.nosdn.127.net,nochange.ggsafe.com,img*.g.pptv.com,7n.bczcdn.com,4gimg.map.qq.com,mlife.jf365.boc.cn,api.psy-1.com,gw.csdn.net,www.flyertea.com,app.mixcapp.com,app.xinpianchang.com,capi.mwee.cn,api.yangkeduo.com,learn.chaoxing.com,*.kakamobi.cn,101.201.175.228,mps.95508.com,*.baidu.com,paopao*.qiyipic.com,mrobot.pcauto.com.cn,acs.m.taobao.com,api.xiachufang.com,m.client.10010.com,xyst.yuanfudao.com,xyz.cnki.net,api.jxedt.com,*.kingsoft-office-service.com,appapi.huazhu.com,c.tieba.baidu.com,*.hxsame.hexun.com,47.97.20.12,gw.aihuishou.com,img01.10101111cdn.com,api.laifeng.com,service.4gtv.tv,mrobot.pconline.com.cn,notch.qdaily.com,tiasdk.app.wechat.com,3gimg.qq.com,*.up.qingdaonews.com,app.api.ke.com,www.amazon.com
